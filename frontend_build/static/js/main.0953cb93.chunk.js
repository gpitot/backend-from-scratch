(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{19:function(e,t,n){e.exports={"fake-header":"style_fake-header__3HsAi",header:"style_header__2lGhW","header-scrolled":"style_header-scrolled__2hjQ_",items:"style_items__1Cbna",inner:"style_inner__2oUn6","item-container":"style_item-container__1m4un","mobile-item-container":"style_mobile-item-container__2FgeB","mobile-dropdown":"style_mobile-dropdown__32CTr","items-container":"style_items-container__OlQiE",open:"style_open__XgSD2"}},21:function(e,t,n){e.exports={area:"pages_area__1rICG",child:"pages_child__4NcuK"}},23:function(e,t,n){e.exports={eventArea:"style_eventArea__3PFfI",cancelled:"style_cancelled__37knS",signup:"style_signup__1h0fb",titleArea:"style_titleArea__3EaAe",title:"style_title__2IEF4",row:"style_row__1WUId"}},32:function(e,t,n){e.exports={bg:"style_bg__37ZTF",base:"style_base__gvFOV",book:"style_book__3bY1N",background:"style_background__3BmfY"}},33:function(e,t,n){e.exports={paidIcon:"style_paidIcon__JsN6Z",paid:"style_paid__1DKU-",notpaid:"style_notpaid__3VNvv"}},34:function(e,t,n){e.exports={user:"style_user__1ofZj",book:"style_book__Odod_","header-scrolled":"style_header-scrolled__pIiZu"}},37:function(e,t,n){e.exports={area:"style_area__3OTxe",video:"style_video__3VmUb"}},38:function(e,t,n){e.exports={register:"style_register__2uU6k",btn:"style_btn__1S1y4",details:"style_details__3Sj1B",input:"style_input__B1dnu",button:"style_button__2NvHx"}},51:function(e,t,n){e.exports={"cta-menu":"style_cta-menu__2-i2c",active:"style_active__1mJ7H"}},52:function(e,t,n){e.exports={event:"style_event__JXPru"}},54:function(e,t,n){e.exports={block:"style_block__1yfBR"}},55:function(e,t,n){e.exports={"table-outer":"style_table-outer__3ODvx"}},56:function(e,t,n){e.exports={user:"style_user__3H-mj"}},57:function(e,t,n){e.exports={button:"style_button__2NB1i"}},58:function(e,t,n){e.exports={date:"style_date__357WV"}},59:function(e,t,n){e.exports={area:"style_area__nB8rQ"}},88:function(e,t,n){},89:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(22),l=n.n(c),s=n(10),o=n(5),i=n(2),u=n(24),d=n.n(u),m=n(19),f=n.n(m),h=n(3),E=n.n(h),p="".concat("https://north-manly-squash.herokuapp.com","/api"),_={headers:{"Content-Type":"application/json"}},v={getEvent:function(e){return E.a.get("".concat(p,"/events/").concat(e)).then((function(e){return e.data}))},getEvents:function(){return E.a.get("".concat(p,"/events")).then((function(e){return e.data}))},editEvent:function(e){return E.a.put("".concat(p,"/events"),e,_).then((function(e){return e.data}))},addEvent:function(e){return E.a.post("".concat(p,"/events"),e,_).then((function(e){return e.data}))}},b=n(9),g="".concat(p,"/user_events"),y={getUserEvents:function(e){return E.a.get("".concat(g,"/").concat(e)).then((function(e){return e.data}))},editUserEvent:function(e){return E.a.put(g,e,Object(b.a)(Object(b.a)({},_),{},{withCredentials:!0})).then((function(e){return e.data}))},deleteUserEvent:function(e){return E.a.put("".concat(g,"/remove"),e,Object(b.a)(Object(b.a)({},_),{},{withCredentials:!0})).then((function(e){return e.data}))},addUserEvent:function(e){return E.a.post(g,e,Object(b.a)(Object(b.a)({},_),{},{withCredentials:!0})).then((function(e){return e.data}))}},O="".concat(p,"/ladder"),j={getLadders:function(){return E.a.get(O).then((function(e){return e.data}))},getMatches:function(e){var t=e.ladder_id,n=e.player_id,a=e.challenges,r=void 0!==a&&a,c=new URL("".concat(O,"/").concat(t,"/matches"));return n&&c.searchParams.set("player_id",n),c.searchParams.set("challenges",r.toString()),E.a.get(c.toString()).then((function(e){return e.data}))},getRanks:function(e){var t=e.ladder_id;return E.a.get("".concat(O,"/").concat(t,"/ranks")).then((function(e){return e.data}))},challengeUser:function(e){var t=e.ladder_id,n=e.player_2;return E.a.post("".concat(O,"/").concat(t,"/challenge"),{player_2:n},Object(b.a)({withCredentials:!0},_)).then((function(e){return e.data}))},challengeAccept:function(e){return E.a.put("".concat(O,"/challenge/accept"),e,Object(b.a)({withCredentials:!0},_)).then((function(e){return e.data}))},challengeTime:function(e){return E.a.put("".concat(O,"/challenge/time"),e,Object(b.a)({withCredentials:!0},_)).then((function(e){return e.data}))},challengeResult:function(e){return E.a.put("".concat(O,"/challenge/result"),e,Object(b.a)({withCredentials:!0},_)).then((function(e){return e.data}))},challengeApprove:function(e){return E.a.put("".concat(O,"/challenge/approve"),e,Object(b.a)({withCredentials:!0},_)).then((function(e){return e.data}))}},C={refreshUser:function(){return E.a.get("".concat(p,"/users/refresh"),{withCredentials:!0}).then((function(e){return e.data}))},getUser:function(){return E.a.get("".concat(p,"/users/me"),{withCredentials:!0}).then((function(e){return e.data}))}};E.a.interceptors.response.use((function(e){return console.log("middle ware - ",e),e}),(function(e){return console.log("middle ware - ",e),405===e.response.status&&(console.log("redirect to auth"),window.location.href="".concat("https://north-manly-squash.herokuapp.com","/auth/login/google")),Promise.reject(e)}));var k={events:v,userEvents:y,ladder:j,users:C},N={id:void 0,email:"",firstname:"",lastname:"",role:"",photo:""},w={user:N,setUser:function(e){}},x=Object(a.createContext)(w),S=function(e){var t=e.children,n=Object(a.useState)(N),c=Object(i.a)(n,2),l=c[0],s=c[1];return console.log("provider ",l),r.a.createElement(x.Provider,{value:{user:l,setUser:s}},t)},U=n(34),A=n.n(U),P=function(){var e=Object(a.useState)(!0),t=Object(i.a)(e,2),n=t[0],c=t[1],l=Object(a.useContext)(x),s=l.user,o=l.setUser;return Object(a.useEffect)((function(){k.users.getUser().then((function(e){e.success&&o(e.user)})).finally((function(){return c(!1)}))}),[o]),n?null:r.a.createElement("div",{className:A.a.user},s.id?r.a.createElement("img",{src:s.photo,alt:""}):r.a.createElement("a",{href:"".concat("https://north-manly-squash.herokuapp.com","/auth/login/google"),className:A.a.book},"Login"))},F=function(){var e=Object(a.useState)(!1),t=Object(i.a)(e,2),n=t[0],c=t[1],l=Object(a.useState)(!1),o=Object(i.a)(l,2),u=o[0],m=o[1];Object(a.useEffect)((function(){var e=function(){window.pageYOffset>96&&!u?m(!0):window.pageYOffset<=96&&u&&m(!1)};return window.addEventListener("scroll",e),function(){window.removeEventListener("scroll",e)}}),[u]);var h=function(){c(!n)},E=u&&f.a["header-scrolled"];return r.a.createElement(r.a.Fragment,null,r.a.createElement("section",{className:d()(f.a.header,E)},r.a.createElement("div",{className:f.a.inner},r.a.createElement("div",{className:f.a["item-container"]},r.a.createElement(s.b,{to:"/"},r.a.createElement("img",{src:"/logo-black.png",alt:""}))),r.a.createElement("div",{className:f.a["items-container"]},r.a.createElement("div",{className:d()(f.a.items,n&&f.a.open)},r.a.createElement(s.b,{to:"/social",onClick:h},"SOCIAL"),r.a.createElement(s.b,{to:"/competition",onClick:h},"COMPETITION"),r.a.createElement(s.b,{to:"/coaching",onClick:h},"COACHING"),r.a.createElement(s.b,{to:"/shop",onClick:h},"SHOP"))),r.a.createElement(P,null),r.a.createElement("div",{className:f.a["mobile-item-container"]},r.a.createElement("button",{onClick:h,className:f.a["mobile-dropdown"]})))),r.a.createElement("section",{className:f.a["fake-header"]}))},I=n(51),T=n.n(I),R=function(e){var t=e.children;return r.a.createElement("div",{className:T.a["cta-menu"]},t)},L=n(32),M=n.n(L),D=n(7),Y=(n(87),function(e){var t=e.children;return r.a.createElement("div",{className:M.a.base},r.a.createElement(F,null),r.a.createElement(D.a,null),r.a.createElement(R,null,r.a.createElement("h2",null,"PLAY AT MANLY"),r.a.createElement(s.b,{to:"/social"},"PLAY SOCIALLY"),r.a.createElement(s.b,{to:"/competition"},"COMPETE AGAINST OTHERS"),r.a.createElement(s.b,{to:"/coaching"},"IMPROVE YOUR PLAY"),r.a.createElement(s.b,{to:"/shop"},"SHOP")),r.a.createElement("section",{className:M.a.background},t),r.a.createElement("a",{href:"http://www.tennisvenues.com.au/booking/warringah-recreation-centre-squash",target:"_blank",rel:"noreferrer",className:M.a.book},"BOOK A COURT"))}),B=n(37),H=n.n(B),J=function(){var e="true"===new URLSearchParams(Object(o.g)().search).get("updatelogin");return Object(a.useEffect)((function(){e&&k.users.refreshUser()}),[e]),r.a.createElement(r.a.Fragment,null,r.a.createElement("section",{className:H.a.area},r.a.createElement("video",{src:"video.webm",className:H.a.video})))},V=n(21),q=n.n(V),G=n(52),Z=n.n(G),K=function(e){var t=e.description,n=e.id,a=e.name;return r.a.createElement(s.b,{to:{pathname:"/event/".concat(n),state:e},className:Z.a.event,key:n},r.a.createElement("h2",null,a),r.a.createElement("h5",null,t))},Q=function(){var e=Object(a.useState)([]),t=Object(i.a)(e,2),n=t[0],c=t[1];return Object(a.useEffect)((function(){k.events.getEvents().then((function(e){var t=e.result;c(t)}))}),[]),r.a.createElement("section",{className:q.a.area},r.a.createElement("section",{className:q.a.child},n.map((function(e){return r.a.createElement(K,Object.assign({},e,{key:e.id}))}))))},W=n(14),X=n(54),z=n.n(X),$=function(e){var t=e.children,n=e.styles;return r.a.createElement("div",{className:d()(z.a.block,n)},t)},ee=n(55),te=n.n(ee),ne=function(e){var t=e.title,n=e.headers,a=e.body;return r.a.createElement($,{styles:te.a["table-outer"]},t&&r.a.createElement("h3",null,t),r.a.createElement("table",null,r.a.createElement("thead",null,r.a.createElement("tr",null,n.map((function(e){return r.a.createElement("th",{key:e},e)})))),r.a.createElement("tbody",null,a.map((function(e,t){return r.a.createElement("tr",{key:t},e.map((function(e,t){return r.a.createElement("td",{key:t},e)})))})))))},ae=r.a.memo(ne),re=n(56),ce=n.n(re),le=function(e){var t=e.name,n=e.photo;return r.a.createElement("div",{className:ce.a.user},r.a.createElement("img",{src:n,alt:""}),r.a.createElement("span",null,t))},se=n(57),oe=n.n(se),ie=function(e){var t=e.disabled,n=void 0!==t&&t,a=e.handleClick,c=e.text;return r.a.createElement("button",{className:oe.a.button,disabled:n,onClick:a},c)},ue=function(e){var t=e.ladderid,n=Object(a.useContext)(x).user,c=Object(a.useState)([]),l=Object(i.a)(c,2),s=l[0],o=l[1],u=Object(a.useState)([]),d=Object(i.a)(u,2),m=d[0],f=d[1];Object(a.useEffect)((function(){void 0!==t&&k.ladder.getRanks({ladder_id:t}).then((function(e){console.log(e),e.success&&o(e.result)}))}),[t]);var h=s.map((function(e,a){var c=e.player_id,l=e.firstname,s=e.photo;return[a+1,r.a.createElement(le,{name:l,photo:s}),r.a.createElement(r.a.Fragment,null,n&&n.id!==c&&r.a.createElement(ie,{disabled:m.includes(c),handleClick:function(){return function(e){f([].concat(Object(W.a)(m),[e])),k.ladder.challengeUser({ladder_id:t,player_2:e}).then((function(e){if(!e.success)throw Error();D.b.success("Challenged player")})).catch((function(){D.b.error("Could not challenge player")}))}(c)},text:"Challenge"}))]}));return r.a.createElement(r.a.Fragment,null,r.a.createElement(ae,{title:"Ranks",headers:["Rank","Player",""],body:h}))},de=function(e){var t=e.id,n=e.accepted,c=e.player_2,l=e.user,s=Object(a.useState)(!1),o=Object(i.a)(s,2),u=o[0],d=o[1];if(n)return r.a.createElement("span",null,"Accepted");if(!l.id)return r.a.createElement("span",null,"Pending");if(c!==l.id)return r.a.createElement("span",null,"Pending");return r.a.createElement(ie,{disabled:u,text:"Accept",handleClick:function(){k.ladder.challengeAccept({match_id:t}).then((function(e){e.success?(D.b.success("Challenge accepted"),d(!0)):D.b.error("Challenge could not be accepted")}))}})},me=function(e){var t=e.matches;console.log("[g]",t);var n=Object(a.useContext)(x).user,c=t.map((function(e){var t=e.id,a=e.player_1_firstname,c=e.player_1_photo,l=e.player_2,s=e.player_2_firstname,o=e.player_2_photo,i=e.accepted;return[r.a.createElement(le,{name:a,photo:c}),r.a.createElement(le,{name:s,photo:o}),r.a.createElement(de,{id:t,accepted:i,player_2:l,user:n})]}));return r.a.createElement(ae,{title:"Upcoming challenges",headers:["Challenger","Opponent","Accepted"],body:c})},fe=n(58),he=n.n(fe),Ee=function(e){var t=e.time,n=new Date(t),a=n.getMinutes()<10?"0"+n.getMinutes():n.getMinutes();return r.a.createElement("div",{className:he.a.date},n.getDate(),"/",n.getMonth()+1,"/",n.getFullYear()," ",n.getHours(),":",a)},pe=function(e){var t=e.matches.map((function(e){var t=e.player_1_firstname,n=e.player_1_photo,a=e.player_2_firstname,c=e.player_2_photo,l=e.match_date,s=e.player_2_games,o=e.player_1_games;return[r.a.createElement(le,{name:t,photo:n}),r.a.createElement(le,{name:a,photo:c}),r.a.createElement("span",null,o," - ",s),r.a.createElement("span",null,r.a.createElement(Ee,{time:l}))]}));return r.a.createElement(ae,{title:"Results",headers:["Challenger","Opponent","Result","Date"],body:t})},_e=function(e){var t=e.ladderid,n=e.challenges,c=Object(a.useState)([]),l=Object(i.a)(c,2),s=l[0],o=l[1];return Object(a.useEffect)((function(){k.ladder.getMatches({ladder_id:t,challenges:n}).then((function(e){e.success&&o(e.result)}))}),[n,t]),r.a.createElement(r.a.Fragment,null,n?r.a.createElement(me,{matches:s}):r.a.createElement(pe,{matches:s}))},ve=function(e){var t=e.ladderid;return r.a.createElement(r.a.Fragment,null,r.a.createElement(ue,{ladderid:t}),r.a.createElement(_e,{ladderid:t,challenges:!0}),r.a.createElement(_e,{ladderid:t,challenges:!1}))},be=function(){return r.a.createElement("section",{className:q.a.area},r.a.createElement("div",{className:q.a.child},r.a.createElement(ve,{ladderid:1})))},ge=n(23),ye=n.n(ge),Oe=n(38),je=n.n(Oe),Ce=n(104),ke=function(e){var t=e.registerCTA,n=e.eventId,c=e.eventName,l=e.isFull,s=Object(a.useState)(!0),o=Object(i.a)(s,2),u=o[0],d=o[1],m=Object(a.useState)(null),f=Object(i.a)(m,2),h=f[0],E=f[1];return l?r.a.createElement($,null,"This event is full"):u?r.a.createElement("form",{className:je.a.register,onSubmit:function(e){e.preventDefault(),k.userEvents.addUserEvent({event_id:n}).then((function(e){var t=e.success,n=e.err;!0===t?D.b.success("Registered succesfully"):(E(n),D.b.success("Could not register")),d(!1)}))}},r.a.createElement($,null,r.a.createElement(Ce.a,{type:"submit",color:"primary",variant:"contained",className:je.a.button},t))):h?r.a.createElement($,null,h):r.a.createElement($,null,"Thank you for signing up to ",c)},Ne=function(e){return e>new Date},we=function(e){return function(t){var n=Object(a.useContext)(x).user;return n.id?"admin"!==n.role&&"superman"!==n.role?null:r.a.createElement(e,t):null}},xe=we((function(e){var t=e.event,n=e.userEvents,c=e.setUserEvents,l=Object(a.useState)(!1),s=Object(i.a)(l,2),o=s[0],u=s[1];return o?r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement("button",{onClick:function(){k.userEvents.editUserEvent(Object(b.a)(Object(b.a)({},t),{},{enabled:!1})).then((function(e){if(e.success){D.b.success("Removed user");var a=Object(W.a)(n).filter((function(e){return e.id!==t.id}));c(a)}else D.b.error("Could not remove user")}))}},"Remove")),r.a.createElement("li",null,r.a.createElement("button",{onClick:function(){k.userEvents.editUserEvent(Object(b.a)(Object(b.a)({},t),{},{paid:!t.paid})).then((function(e){if(e.success){D.b.success("Paid status is now : ".concat(!t.paid));for(var a=Object(W.a)(n),r=0;r<a.length;r+=1)if(a[r].id===t.id){a[r].paid=!a[r].paid;break}c(a)}else D.b.error("Could not update paid status")}))}},"Mark as paid"))):r.a.createElement("button",{onClick:function(){u((function(e){return!e}))}},"Edit")})),Se=n(33),Ue=n.n(Se),Ae=we((function(e){var t=e.paid?Ue.a.paid:Ue.a.notpaid;return r.a.createElement("div",{className:d()(Ue.a.paidIcon,t)})})),Pe=function(e){var t=e.event,n=e.userEvents,c=e.setUserEvents,l=Object(a.useContext)(x).user,s=t.enabled,o=t.open,i=t.start,u=t.spots;if(void 0===n||!1===s)return null;for(var d=0,m=!1,f=0;f<n.length;f+=1){var h=n[f],E=h.enabled,p=h.user_id;E&&(d+=1),E&&l.id===p&&(m=!0)}var _=u<=d,v=!Ne(new Date(o)),b=Ne(new Date(i));console.log(n,"[g]");var g=n.map((function(e){return[r.a.createElement("div",{className:ye.a.row},r.a.createElement(le,{name:"".concat(e.firstname," ").concat(e.lastname),photo:e.photo}),l.id===e.user_id&&r.a.createElement(ie,{handleClick:function(){return function(e){var t=e.id;k.userEvents.deleteUserEvent({id:t}).then((function(e){if(e.success){D.b.success("Successfuly removed yourself from this event");var a=Object(W.a)(n).filter((function(e){return e.id!==t}));c(a)}else D.b.error("Could not remove yourself from this event")}))}(e)},text:"X"}),r.a.createElement(xe,{event:e,userEvents:n,setUserEvents:c}),r.a.createElement(Ae,{paid:e.paid}))]}));return r.a.createElement("div",{className:ye.a.signup},v&&b&&!m&&r.a.createElement(ke,{registerCTA:"Sign up for this event",eventId:t.id,eventName:t.name,isFull:_}),r.a.createElement(ae,{headers:[t.name],body:g}))},Fe=r.a.memo(Pe),Ie=function(){var e=Object(o.g)().state,t=Object(o.h)().eventid,n=Object(a.useState)(void 0),c=Object(i.a)(n,2),l=c[0],s=c[1],u=Object(a.useState)(void 0),d=Object(i.a)(u,2),m=d[0],f=d[1];if(Object(a.useEffect)((function(){void 0!==t&&(void 0===e?k.events.getEvent(t).then((function(e){e.success&&s(e.result)})):s(e),k.userEvents.getUserEvents(t).then((function(e){e.success&&(console.log(e.result),f(e.result))})))}),[e,t]),void 0===t)return r.a.createElement(o.a,{to:"/"});if(void 0===l)return null;var h=l.description,E=l.enabled,p=l.name,_=l.start;return r.a.createElement("section",{className:q.a.area},r.a.createElement("div",{className:q.a.child},r.a.createElement("div",{className:ye.a.eventArea},r.a.createElement("div",{className:ye.a.titleArea},r.a.createElement("h1",{className:ye.a.title},p),!0===E&&r.a.createElement(Ee,{time:_})),r.a.createElement("h5",null,h),!1===E&&r.a.createElement("h1",{className:ye.a.cancelled},"This event has been cancelled")),r.a.createElement(Fe,{event:l,userEvents:m,setUserEvents:f})))},Te=n(105),Re=n(59),Le=n.n(Re),Me=function(){return r.a.createElement("section",{className:Le.a.area},r.a.createElement("h1",null,"Coming soon"))},De=function(){return r.a.createElement(s.a,null,r.a.createElement(Te.b,{injectFirst:!0},r.a.createElement(Y,null,r.a.createElement(o.d,null,r.a.createElement(o.b,{exact:!0,path:"/"},r.a.createElement(J,null)),r.a.createElement(o.b,{exact:!0,path:"/social"},r.a.createElement(Q,null)),r.a.createElement(o.b,{path:"/event/:eventid"},r.a.createElement(Ie,null)),r.a.createElement(o.b,{exact:!0,path:"/competition"},r.a.createElement(be,null)),r.a.createElement(o.b,{path:"/competition/:comp"},r.a.createElement(be,null)),r.a.createElement(o.b,{path:"/competition/ladder/:ladderid"},r.a.createElement(be,null)),r.a.createElement(o.b,{path:"/coaching"},r.a.createElement(Me,null)),r.a.createElement(o.b,{path:"/shop"}," ",r.a.createElement(Me,null))))))},Ye=function(){return r.a.createElement(S,null,r.a.createElement(De,null))},Be=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,106)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,c=t.getLCP,l=t.getTTFB;n(e),a(e),r(e),c(e),l(e)}))};n(88);l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(Ye,null)),document.getElementById("root")),Be(console.log)}},[[89,1,2]]]);
//# sourceMappingURL=main.0953cb93.chunk.js.map